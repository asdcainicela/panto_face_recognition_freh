
[mode]
# Modos de operación
# Detección de rostros
detect = true
# Grabar video
record = true
# Mostrar en pantalla
display = true
# Reconocimiento facial (ArcFace)
recognize = true

# ===== CÁMARA =====
[camera]
user = "admin"
pass = "Panto2025"
ip = "192.168.0.101"
port = 554

# ===== INPUT =====
[input]
# Opciones: "main", "sub", o ruta a video "videos/test.mp4"
#source = "sub"
source = "main"
#source = "videos/output/output_main_20251120_170436.mp4"
#source = "run1.mp4"


# Backend de captura para RTSP: "ffmpeg" (recomendado) o "gstreamer"
#capture_backend = "ffmpeg"
capture_backend = "gstreamer"


# ===== DETECTOR (SCRFD) =====
[detector]
model_path = "models/scrfd_10g_bnkps.engine"
conf_threshold = 0.3
nms_threshold = 0.4
  # CUDA preprocessing
use_gpu_preprocessing = false

# ===== RECOGNIZER (ArcFace) =====
[recognizer]
model_path = "models/arcface_r100.engine"
embedding_size = 512
use_gpu_preprocessing = true
# Umbral de similitud (0.0-1.0)
# 0.5 = permisivo, 0.6 = default, 0.7 = estricto
threshold = 0.6

[emotion]
enabled = true
use_interval = true
# Cada 3 frames (120ms @ 25fps)
analyze_interval = 1

[age_gender]
enabled = true
# Actualizar periódicamente
use_interval = true
# Cada 30 frames (1.2s @ 25fps)
analyze_interval = 1

# ===== DATABASE =====
[database]
path = "database/faces.db"
backend = "sqlite"

# ===== OUTPUT =====
[output]
display_enabled = true
display_width = 1280
display_height = 720
draw_fps = true
draw_detections = true
draw_landmarks = true
# Mostrar nombres reconocidos
draw_names = true
save_output = false
output_dir = "videos/output"
video_codec = "H264"
video_fps = 25.0

# FaceLogger Configuration
# Activar/desactivar logging
enable_logging = true
         # Directorio donde se guardan los JSON         
log_path = "logs/faces"
# Guardar cada 30 frames (evita duplicados)
log_interval = 1


# ===== PERFORMANCE =====
[performance]
max_fps = 30
# FPS objetivo (0 = sin límite)
skip_frames = 0
# Procesar 1 de cada N frames (0 = todos)
fps_interval = 30
# Intervalo de log

# ===== ? CAPTURE THREAD =====
[capture]
# Configuración del thread de captura exclusivo
# Máximo de frames en queue
queue_size = 3
# Errores antes de reconectar
max_errors_before_reconnect = 30
# Máximo de fallos antes de abortar 
max_consecutive_fails = 100
# Fallos consecutivos para reconectar
reconnect_threshold = 10   