# ============= config.toml ============

[mode]
# Activar detección de rostros
detect = true
# Activar grabación de video
record = false
# Mostrar ventana de visualización
display = true
# Activar reconocimiento facial
recognize = true

[camera]
# Usuario de la cámara RTSP
user = "admin"
# Contraseña de la cámara RTSP
pass = "Panto2025"
# IP de la cámara
ip = "192.168.0.101"
# Puerto RTSP
port = 554

[input]
# Fuente: "main", "sub" o ruta a archivo
#source = "sub"
#source = "main"
source = "videos/output/output_main_20251120_170436.mp4"
# Backend de captura: "ffmpeg" o "gstreamer"
#capture_backend = "ffmpeg"
capture_backend = "gstreamer"

[detector]
# Modelo SCRFD optimizado
model_path = "models/scrfd_10g_bnkps.engine"
# Umbral de confianza
conf_threshold = 0.3
# Umbral NMS
nms_threshold = 0.5
# Preprocesamiento en GPU
use_gpu_preprocessing = true

[recognizer]
# Modelo ArcFace
model_path = "models/arcface_r100.engine"
# Dimensión del embedding
embedding_size = 512
# Preprocesamiento en GPU
use_gpu_preprocessing = true
# Umbral de similitud
threshold = 0.6

[emotion]
# Habilitar análisis de emociones
enabled = true
# Modelo FER+
model_path = "models/emotion_ferplus.engine"
# Analizar cada N frames
analyze_interval = 5

[age_gender]
# Habilitar predicción de edad y género
enabled = true
# Modelo de edad/género
model_path = "models/age_gender.engine"
# Analizar cada N frames
analyze_interval = 10

[database]
# Ruta a la base de datos SQLite
path = "database/faces.db"
# Backend de base de datos
backend = "sqlite"

[output]
# Mostrar en pantalla
display_enabled = true
# Resolución de salida
display_width = 1280
display_height = 720
# Dibujar FPS
draw_fps = true
# Dibujar detecciones
draw_detections = true
# Dibujar landmarks
draw_landmarks = true
# Mostrar nombres
draw_names = true
# Guardar video de salida
save_output = false
# Carpeta de salida
output_dir = "videos/output"
# Códec de video
video_codec = "H264"
# FPS del video de salida
video_fps = 25.0

[performance]
# FPS objetivo
max_fps = 30
# Saltar frames (0 = ninguno)
skip_frames = 0
# Intervalo del log de FPS
fps_interval = 30

[capture]
# Tamaño máximo de la cola de captura
queue_size = 3
# Errores antes de reconectar
max_errors_before_reconnect = 30
# Fallos consecutivos máximos
max_consecutive_fails = 100
# Umbral para forzar reconexión
reconnect_threshold = 10
